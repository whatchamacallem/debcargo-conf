--- a/src/lib.rs
+++ b/src/lib.rs
@@ -174,5 +174,5 @@
     use crate::{parse_duration, DateError, Dialect, Interval};
 
-    #[cfg(feature = "chrono")]
+    #[cfg(all(feature = "chrono", feature = "std"))]
     #[track_caller]
     fn format_chrono(d: &crate::types::DateTimeSpec, dialect: Dialect) -> String {
@@ -190,5 +190,5 @@
     }
 
-    #[cfg(feature = "time")]
+    #[cfg(all(feature = "time", feature = "std"))]
     #[track_caller]
     fn format_time(d: &crate::types::DateTimeSpec, dialect: Dialect) -> String {
