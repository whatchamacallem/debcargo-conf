--- a/Cargo.toml
+++ b/Cargo.toml
@@ -66,52 +66,65 @@
 name = "regression"
 path = "tests/regression.rs"
+required-features = ["parsing", "full", "extra-traits"]
 
 [[test]]
 name = "test_asyncness"
 path = "tests/test_asyncness.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_attribute"
 path = "tests/test_attribute.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_derive_input"
 path = "tests/test_derive_input.rs"
+required-features = ["full", "extra-traits", "derive"]
 
 [[test]]
 name = "test_expr"
 path = "tests/test_expr.rs"
+required-features = ["full", "extra-traits", "derive"]
 
 [[test]]
 name = "test_generics"
 path = "tests/test_generics.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_grouping"
 path = "tests/test_grouping.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_ident"
 path = "tests/test_ident.rs"
+required-features = ["parsing"]
 
 [[test]]
 name = "test_item"
 path = "tests/test_item.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_iterators"
 path = "tests/test_iterators.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_lit"
 path = "tests/test_lit.rs"
+required-features = ["full", "extra-traits", "derive"]
 
 [[test]]
 name = "test_meta"
 path = "tests/test_meta.rs"
+required-features = ["full", "extra-traits", "derive"]
 
 [[test]]
 name = "test_parse_buffer"
 path = "tests/test_parse_buffer.rs"
+required-features = ["parsing"]
 
 [[test]]
@@ -122,12 +135,15 @@
 name = "test_parse_stream"
 path = "tests/test_parse_stream.rs"
+required-features = ["parsing"]
 
 [[test]]
 name = "test_pat"
 path = "tests/test_pat.rs"
+required-features = ["full", "extra-traits", "derive"]
 
 [[test]]
 name = "test_path"
 path = "tests/test_path.rs"
+required-features = ["full", "derive"]
 
 #[[test]]
@@ -138,4 +154,5 @@
 name = "test_receiver"
 path = "tests/test_receiver.rs"
+required-features = ["full", "derive"]
 
 #[[test]]
@@ -146,24 +163,30 @@
 name = "test_shebang"
 path = "tests/test_shebang.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_size"
 path = "tests/test_size.rs"
+required-features = ["full"]
 
 [[test]]
 name = "test_stmt"
 path = "tests/test_stmt.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_token_trees"
 path = "tests/test_token_trees.rs"
+required-features = ["full", "derive"]
 
 [[test]]
 name = "test_ty"
 path = "tests/test_ty.rs"
+required-features = ["full", "extra-traits", "derive"]
 
 [[test]]
 name = "test_visibility"
 path = "tests/test_visibility.rs"
+required-features = ["full", "extra-traits", "derive"]
 
 [[test]]
--- a/tests/macros/mod.rs
+++ b/tests/macros/mod.rs
@@ -1,2 +1,3 @@
+#![cfg(feature = "parsing")]
 #![allow(unused_macros, unused_macro_rules)]
 
--- a/tests/test_parse_quote.rs
+++ b/tests/test_parse_quote.rs
@@ -1,2 +1,3 @@
+#![cfg(all(feature = "parsing", feature = "printing", feature = "full"))]
 #![allow(clippy::uninlined_format_args)]
 
--- a/tests/test_parse_stream.rs
+++ b/tests/test_parse_stream.rs
@@ -1,2 +1,3 @@
+#![cfg(feature = "printing")] // printing = ["dep:quote"]
 #![allow(clippy::items_after_statements, clippy::let_underscore_untyped)]
 
