From: =?utf-8?q?Jeremy_B=C3=ADcha?= <jeremy.bicha@canonical.com>
Date: Sat, 24 Aug 2024 18:28:28 -0400
Subject: Don't require image-avif

Debian's rust-image is currently built without avif support

Gbp-Dch: Name relax-image-avif.diff
---
 Cargo.toml      | 4 ++--
 src/document.rs | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/Cargo.toml b/Cargo.toml
index b0cb544..6cb1dc0 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -241,8 +241,8 @@ version = "3"
 [build-dependencies.system-deps]
 version = "7.0.0"
 
-[features]
-avif = ["image/avif"]
+#[features]
+#avif = ["image/avif"]
 
 [lints.rust.unexpected_cfgs]
 level = "warn"
diff --git a/src/document.rs b/src/document.rs
index 9fcd63f..ac3ce3a 100644
--- a/src/document.rs
+++ b/src/document.rs
@@ -634,8 +634,8 @@ fn image_format(content_type: &str) -> Result<image::ImageFormat, LoadingError>
         "image/gif" => Ok(image::ImageFormat::Gif),
         "image/webp" => Ok(image::ImageFormat::WebP),
 
-        #[cfg(feature = "avif")]
-        "image/avif" => Ok(image::ImageFormat::Avif),
+//        #[cfg(feature = "avif")]
+//        "image/avif" => Ok(image::ImageFormat::Avif),
 
         _ => Err(LoadingError::Other(format!(
             "unsupported image format {content_type}"
