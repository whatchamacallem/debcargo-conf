Last-Update: 2025-09-02
Author: Blair Noctis <ncts@debian.org>
Forwarded: not-needed
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -126,5 +126,5 @@
 [dev-dependencies.rand]
-version = "0.9"
+version = "0.8"
 
 [dev-dependencies.rand_xorshift]
-version = "0.4"
+version = "0.3"
--- a/src/iter/mod.rs
+++ b/src/iter/mod.rs
@@ -419,3 +419,3 @@
     ///
-    /// ```
+    /// ```ignore
     /// use rand::Rng;
@@ -527,3 +527,3 @@
     ///
-    /// ```
+    /// ```ignore
     /// use rand::{Rng, TryRngCore};
@@ -646,3 +646,3 @@
     ///
-    /// ```
+    /// ```ignore
     /// use rand::Rng;
--- a/src/iter/test.rs
+++ b/src/iter/test.rs
@@ -6,3 +6,3 @@
 
-use rand::distr::StandardUniform;
+use rand::distributions::Standard as StandardUniform;
 use rand::{Rng, SeedableRng};
--- a/src/slice/sort.rs
+++ b/src/slice/sort.rs
@@ -1613,4 +1613,4 @@
     use super::split_for_merge;
-    use rand::distr::Uniform;
-    use rand::{rng, Rng};
+    use rand::distributions::Uniform;
+    use rand::{thread_rng as rng, Rng};
 
@@ -1622,3 +1622,3 @@
             for &modulus in &[5, 10, 100] {
-                let dist = Uniform::new(0, modulus).unwrap();
+                let dist = Uniform::new(0, modulus);
                 for _ in 0..100 {
@@ -1642,3 +1642,3 @@
         let mut v: Vec<_> = (0..100).collect();
-        heapsort(&mut v, |_, _| rand::rng().random());
+        heapsort(&mut v, |_, _| rand::thread_rng().gen());
         heapsort(&mut v, |a, b| a < b);
@@ -1667,8 +1667,8 @@
         for _ in 0..100 {
-            let limit: u32 = rng.random_range(1..21);
-            let left_len: usize = rng.random_range(0..20);
-            let right_len: usize = rng.random_range(0..20);
+            let limit: u32 = rng.gen_range(1..21);
+            let left_len: usize = rng.gen_range(0..20);
+            let right_len: usize = rng.gen_range(0..20);
 
             let mut left = rng
-                .sample_iter(&Uniform::new(0, limit).unwrap())
+                .sample_iter(&Uniform::new(0, limit))
                 .take(left_len)
@@ -1676,3 +1676,3 @@
             let mut right = rng
-                .sample_iter(&Uniform::new(0, limit).unwrap())
+                .sample_iter(&Uniform::new(0, limit))
                 .take(right_len)
--- a/src/slice/test.rs
+++ b/src/slice/test.rs
@@ -3,5 +3,5 @@
 use crate::prelude::*;
-use rand::distr::Uniform;
-use rand::seq::IndexedRandom;
-use rand::{rng, Rng};
+use rand::distributions::Uniform;
+use rand::seq::SliceRandom;
+use rand::{thread_rng as rng, Rng};
 use std::cmp::Ordering::{Equal, Greater, Less};
@@ -17,3 +17,3 @@
                 for &modulus in &[5, 10, 100] {
-                    let dist = Uniform::new(0, modulus).unwrap();
+                    let dist = Uniform::new(0, modulus);
                     for _ in 0..100 {
@@ -37,3 +37,3 @@
                 for &modulus in &[5, 10, 100, 10_000] {
-                    let dist = Uniform::new(0, modulus).unwrap();
+                    let dist = Uniform::new(0, modulus);
                     let mut v: Vec<i32> = rng.sample_iter(&dist).take(len).collect();
@@ -47,5 +47,5 @@
             for &len in &[1_000, 10_000, 100_000] {
-                let len_dist = Uniform::new(0, len).unwrap();
+                let len_dist = Uniform::new(0, len);
                 for &modulus in &[5, 10, 1000, 50_000] {
-                    let dist = Uniform::new(0, modulus).unwrap();
+                    let dist = Uniform::new(0, modulus);
                     let mut v: Vec<i32> = rng.sample_iter(&dist).take(len).collect();
@@ -73,3 +73,3 @@
             let mut v: Vec<_> = (0..100).collect();
-            v.$f(|_, _| *[Less, Equal, Greater].choose(&mut rand::rng()).unwrap());
+            v.$f(|_, _| *[Less, Equal, Greater].choose(&mut rand::thread_rng()).unwrap());
             v.$f(|a, b| a.cmp(b));
@@ -108,3 +108,3 @@
                 .map(|_| {
-                    let n: usize = rng.random_range(0..10);
+                    let n: usize = rng.gen_range(0..10);
                     counts[n] += 1;
--- a/tests/sort-panic-safe.rs
+++ b/tests/sort-panic-safe.rs
@@ -1,3 +1,3 @@
-use rand::distr::Uniform;
-use rand::{rng, Rng};
+use rand::distributions::Uniform;
+use rand::{thread_rng as rng, Rng};
 use rayon::prelude::*;
@@ -130,3 +130,3 @@
     for &len in &[1, 2, 3, 4, 5, 10, 20, 100, 500, 5_000, 20_000] {
-        let len_dist = Uniform::new(0, len).unwrap();
+        let len_dist = Uniform::new(0, len);
         for &modulus in &[5, 30, 1_000, 20_000] {
@@ -136,3 +136,3 @@
                     .map(|id| DropCounter {
-                        x: rng.random_range(0..modulus),
+                        x: rng.gen_range(0..modulus),
                         id,
--- a/tests/str.rs
+++ b/tests/str.rs
@@ -1,2 +1,2 @@
-use rand::distr::StandardUniform;
+use rand::distributions::Standard as StandardUniform;
 use rand::{Rng, SeedableRng};
