--- rust-opendal-0.52.0.orig/src/lib.rs
+++ rust-opendal-0.52.0/src/lib.rs
@@ -151,2 +151,3 @@
     #[test]
+    #[cfg(target_pointer_width = "64")]
     fn assert_size() {
--- rust-opendal-0.52.0.orig/Cargo.toml
+++ rust-opendal-0.52.0/Cargo.toml
@@ -368,2 +368,5 @@
 
+[target.'cfg(not(target_has_atomic = "64"))'.dependencies.portable-atomic]
+version = "1.4"
+
 [dev-dependencies.criterion]
--- rust-opendal-0.52.0.orig/src/raw/atomic_util.rs
+++ rust-opendal-0.52.0/src/raw/atomic_util.rs
@@ -17,3 +17,7 @@
 
+#[cfg(target_has_atomic = "64")]
 use std::sync::atomic::AtomicU64;
+#[cfg(not(target_has_atomic = "64"))]
+use portable_atomic::AtomicU64;
+
 use std::sync::atomic::Ordering;
