Description: Downgrade rustls to packaged 0.21
 to avoid a transition of rustls itself.
Forwarded: not-needed
Last-Update: 2024-11-02
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -223 +223 @@
-__rustls-ring = [
+#__rustls-ring = [
@@ -226 +226 @@
-    "rustls?/ring",
+#    "rustls?/ring",
@@ -228 +228 @@
-]
+#]
@@ -303 +303 @@
-    "__rustls-ring",
+#    "__rustls-ring",
@@ -308 +308 @@
-    "__rustls-ring",
+#    "__rustls-ring",
@@ -446 +446 @@
-version = "0.23.4"
+version = "0.21"
@@ -448 +448 @@
-    "std",
+#    "std",
@@ -455 +455 @@
-version = "0.8.0"
+version = "0.6.0"
@@ -459 +459 @@
-version = "2"
+version = "1"
@@ -549,2 +549,2 @@
-version = "0.23"
-features = ["ring"]
+version = "0.21"
+#features = ["ring"]
--- a/src/tls.rs
+++ b/src/tls.rs
@@ -232,5 +232 @@
-            .map(|result| match result {
-                Ok(cert) => Ok(cert.as_ref().to_vec()),
-                Err(_) => Err(crate::error::builder("invalid certificate encoding")),
-            })
-            .collect()
+            .map_err(|e| crate::error::builder(format!("failed to read pem certs: {e:?}")))
