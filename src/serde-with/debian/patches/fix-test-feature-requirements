Index: serde-with/Cargo.toml
===================================================================
--- serde-with.orig/Cargo.toml
+++ serde-with/Cargo.toml
@@ -155,17 +155,17 @@ required-features = [
 [[test]]
 name = "rust"
 path = "tests/rust.rs"
-required-features = ["alloc"]
+required-features = ["std"]
 
 [[test]]
 name = "schemars_0_8"
 path = "tests/schemars_0_8.rs"
-required-features = ["schemars_0_8"]
+required-features = ["macros", "schemars_0_8"]
 
 [[test]]
 name = "serde_as"
 path = "tests/serde_as/lib.rs"
-required-features = ["macros"]
+required-features = ["std","macros"]
 
 [[test]]
 name = "time_0_3"
@@ -186,7 +186,7 @@ path = "tests/version_numbers.rs"
 [[test]]
 name = "with_prefix"
 path = "tests/with_prefix.rs"
-required-features = ["macros"]
+required-features = ["std","macros"]
 
 [[test]]
 name = "with_suffix"
Index: serde-with/tests/with_suffix.rs
===================================================================
--- serde-with.orig/tests/with_suffix.rs
+++ serde-with/tests/with_suffix.rs
@@ -1,3 +1,4 @@
+#![cfg(feature = "std")]
 //! Test Cases
 
 extern crate alloc;
