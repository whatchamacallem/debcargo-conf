overlay = "."
uploaders = ["Arnaud Ferraris <aferraris@debian.org>"]
collapse_features = true
# Some tests are written in C and get built when `cargo test` is executed.
whitelist = ["tests/*.c"]

[source]
# rust-pango-sys-0.18 dep ensures we have up-to-date generated bindings
build_depends = [
    "gir1.2-phosh-0-dev",
    "gir-rust-code-generator",
    "gobject-introspection (>= 1.86.0)",
    "librust-shell-words-1+default-dev <!nocheck>",
    "librust-tempfile-3+default-dev <!nocheck>",
    "librust-pango-sys-0.18-dev (>= 0.18.0-4)",
    "xmlstarlet",
]
skip_nocheck = true

[packages.lib]
# rust-pango-sys-0.18 dep ensures we have up-to-date generated bindings
depends = [
    "gir1.2-phosh-0-dev",
    "gir-rust-code-generator",
    "gobject-introspection (>= 1.86.0)",
    "libphosh-0.45-dev",
    "librust-pango-sys-0.18-dev (>= 0.18.0-4)",
    "xmlstarlet",
]
# ensure we migrate along with the proper rust-libphosh version
breaks = ["librust-libphosh-dev (<< 0.0.6-3~)"]
