Index: zbus-1/Cargo.toml
===================================================================
--- zbus-1.orig/Cargo.toml
+++ zbus-1/Cargo.toml
@@ -53,7 +53,7 @@ version = "0.3.8"
 version = "1.0.2"
 
 [dependencies.nix]
-version = "0.27"
+version = "0.29"
 features = ["poll", "user", "socket", "uio"]
 
 [dependencies.once_cell]
Index: zbus-1/src/raw/socket.rs
===================================================================
--- zbus-1.orig/src/raw/socket.rs
+++ zbus-1/src/raw/socket.rs
@@ -74,7 +74,7 @@ impl Socket for UnixStream {
         ) {
             Ok(msg) => {
                 let mut fds = vec![];
-                for cmsg in msg.cmsgs() {
+                for cmsg in msg.cmsgs()? {
                     if let ControlMessageOwned::ScmRights(fd) = cmsg {
                         fds.extend(fd.iter().map(|&f| unsafe { OwnedFd::from_raw_fd(f) }));
                     } else {
Index: zbus-1/src/utils.rs
===================================================================
--- zbus-1.orig/src/utils.rs
+++ zbus-1/src/utils.rs
@@ -2,6 +2,7 @@ use nix::{
     errno::Errno,
     poll::{poll, PollFd, PollFlags},
 };
+use nix::poll::PollTimeout;
 use std::os::unix::io::RawFd;
 use std::os::fd::BorrowedFd;
 
@@ -19,9 +20,9 @@ pub(crate) fn padding_for_n_bytes(value:
 
 pub(crate) fn wait_on(fd: RawFd, flags: PollFlags) -> std::io::Result<()> {
     let fd = unsafe { BorrowedFd::borrow_raw(fd) };
-    let pollfd = PollFd::new(&fd , flags);
+    let pollfd = PollFd::new(fd , flags);
     loop {
-        match poll(&mut [pollfd], -1) {
+        match poll(&mut [pollfd], PollTimeout::NONE) {
             Ok(_) => break,
             Err(e) => {
                 if e == Errno::EAGAIN || e == Errno::EINTR {
