Index: ripasso/benches/library_benchmark.rs
===================================================================
--- ripasso.orig/benches/library_benchmark.rs
+++ ripasso/benches/library_benchmark.rs
@@ -44,11 +44,24 @@ fn pop_list(password_dir: PathBuf) -> pa
 }
 
 fn criterion_benchmark_load_4_passwords(c: &mut Criterion) {
-    let mut base_path: PathBuf = std::env::current_exe().unwrap();
-    base_path.pop();
-    base_path.pop();
-    base_path.pop();
-    base_path.pop();
+    let mut base_path: PathBuf;
+    if let Some(base_path_str) = option_env!("CARGO_MANIFEST_DIR") {
+        base_path = PathBuf::from(base_path_str);
+    } else {
+        base_path = std::env::current_exe().unwrap();
+        base_path.pop();
+        base_path.pop();
+        base_path.pop();
+        if base_path.file_name().unwrap() != "target" {
+            //if an explicit target is specified, there is an extra level
+            //in the directory tree.
+            base_path.pop();
+        }
+        if base_path.file_name().unwrap() != "target" {
+            panic!("could not find crate root");
+        }
+        base_path.pop();
+    }
     base_path.push("testres");
 
     let mut password_dir: PathBuf = base_path.clone();
